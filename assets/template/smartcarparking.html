
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>smart car parking system</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
 
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.timepicker.css' %}">

    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
<style>
/* Modern styling for the form container */
.ftco-appointment {
  background: transparent !important;
  padding: 0 !important;
}

.heading-section-white h1 {
  font-size: 2.5rem !important;
  font-weight: 700 !important;
  color: #1a1a2e !important;
  margin-bottom: 30px !important;
  text-shadow: none !important;
}

.appointment {
  background: rgba(255, 255, 255, 0.98);
  padding: 50px;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.custom-file-input {
  display: block;
  width: 100%;
  height: auto;
  padding: 0;
}

.custom-file-label {
  padding: 30px 25px !important;
  font-size: 1.2rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  outline: 0 !important;
  user-select: none !important;
  border: 2px dashed #667eea !important;
  border-radius: 12px !important;
  background: linear-gradient(135deg, #f0f5ff 0%, #ffffff 100%) !important;
  color: #667eea !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  transition: all 0.4s ease !important;
  min-height: 120px !important;
}

.custom-file-label:hover {
  border-color: #764ba2 !important;
  background: linear-gradient(135deg, #e8f1ff 0%, #f5f5ff 100%) !important;
  transform: translateY(-3px) !important;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.25) !important;
  color: #764ba2 !important;
}

.custom-file-label:active {
  transform: translateY(0) !important;
}

.btn-info {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  border: none !important;
  padding: 18px 40px !important;
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  border-radius: 10px !important;
  width: 100% !important;
  transition: all 0.3s ease !important;
  margin-top: 20px !important;
  text-transform: uppercase !important;
  letter-spacing: 1px !important;
  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3) !important;
}

.btn-info:hover {
  transform: translateY(-3px) !important;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4) !important;
}

.btn-info:active {
  transform: translateY(0) !important;
}

.form-group {
  margin-bottom: 25px !important;
}

.overlay {
  background: rgba(0, 0, 0, 0.3) !important;
}

@media (max-width: 768px) {
  .heading-section-white h1 {
    font-size: 2rem !important;
  }
  
  .appointment {
    padding: 25px;
  }
  
  .custom-file-label {
    padding: 15px 20px !important;
    font-size: 1rem !important;
  }
}
  </style>

  </head>

  <body>
		<div class="wrap">
	    <div class="container">
				<div class="row justify-content-between">
					<div class="col-md-3 d-flex align-items-center">
					<a class="navbar-brand" href="#">SmartSlot</a>
					</div>
					<div class="col-md-7">
						<div class="row">
							<div class="col">
								<div class="top-wrap d-flex">
									<div class="icon d-flex align-items-center justify-content-center"><span class="fa fa-location-arrow"></span></div>
									<div class="text"><span>Address</span><span>Puttaparthi</span></div>
								</div>
							</div>
							<div class="col">
								<div class="top-wrap d-flex">
									<div class="icon d-flex align-items-center justify-content-center"><span class="fa fa-phone"></span></div>
									<div class="text"><span>Call us</span><span>+91 90147 92534</span></div>
								</div>
							</div>
							<div class="col-md-3 d-flex justify-content-end align-items-center">
								<div class="social-media">
					    		<p class="mb-0 d-flex">
					    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-facebook"><i class="sr-only">Facebook</i></span></a>
					    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-twitter"><i class="sr-only">Twitter</i></span></a>
					    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-instagram"><i class="sr-only">Instagram</i></span></a>
					    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-dribbble"><i class="sr-only">Dribbble</i></span></a>
					    		</p>
				        </div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	    
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="fa fa-bars"></span> Menu
	      </button>
				<form action="#" class="searchform order-lg-last">
          <div class="form-group d-flex">
            <input type="text" class="form-control pl-3" placeholder="Search">
            <button type="submit" placeholder="" class="form-control search"><span class="fa fa-search"></span></button>
          </div>
        </form>
	      <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav mr-auto" style="flex-wrap: nowrap; gap: 8px;">
	        	<li class="nav-item" style="white-space: nowrap;"><a href="{% url 'dashboard' %}" class="nav-link" style="font-size: 13px;">Dashboard</a></li>
	        	<li class="nav-item" style="white-space: nowrap;"><a href="{% url 'find_my_car' %}" class="nav-link" style="font-size: 13px;">Find My Car</a></li>
	        	<li class="nav-item" style="white-space: nowrap;"><a href="{% url 'parking_lot_status' %}" class="nav-link" style="font-size: 13px;">Parking Status</a></li>
	        	<li class="nav-item" style="white-space: nowrap;"><a href="{% url 'vehicle_history' %}" class="nav-link" style="font-size: 13px;">Vehicle History</a></li>	        		
	        	<li class="nav-item" style="white-space: nowrap;"><a href="{% url 'smart_car_parking' %}" class="nav-link" style="font-size: 13px;">Smart Parking</a></li>
              <li class="nav-item" style="white-space: nowrap;"><a href="{% url 'detect_numberplate' %}" class="nav-link" style="font-size: 13px;">License Plate</a></li>
				    <li class="nav-item" style="white-space: nowrap;"><a href="{% url 'login' %}" class="nav-link" style="font-size: 13px;">Logout</a></li>
          </ul>
	      </div>
	    </div>
	  </nav>
<!--page content starts here -->
<section class="ftco-appointment ftco-section ftco-no-pt ftco-no-pb" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #00d4ff 100%); min-height: 100vh;">
        <div class="container-fluid">
          <div class="row no-gutters" style="min-height: 100vh;">
            <!-- Left side with image -->
            <div class="col-lg-6 d-flex align-items-center justify-content-center" style="padding: 40px 20px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.95), rgba(118, 75, 162, 0.95));">
              <div style="width: 100%; max-width: 700px; border-radius: 15px; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
                <img src="{% static 'images/smartcar.png' %}" alt="Smart Parking" style="width: 100%; height: auto; display: block;">
              </div>
            </div>
            <!-- Right side with form -->
            <div class="col-lg-6 d-flex align-items-center" style="padding: 40px 20px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(245, 245, 255, 0.98));">
              <div class="w-100">
                <div class="px-5 ftco-animate heading-section heading-section-white">
                <h1>SMART CAR PARKING SYSTEM</h1>
                <p style="font-size: 1.1rem; color: #333; margin-bottom: 25px; line-height: 1.6;">
                  Upload a video or image to analyze parking space availability in real-time. Our AI-powered system detects available slots instantly.
                </p>
                
                <!-- Features list -->
                <div style="margin-bottom: 30px; padding: 15px; background: rgba(102, 126, 234, 0.08); border-radius: 10px; border-left: 4px solid #667eea;">
                  <div style="display: flex; align-items: center; margin-bottom: 12px; color: #1a1a2e;">
                    <span style="font-size: 1.5rem; margin-right: 12px; color: #667eea;">✓</span>
                    <span>Real-time parking slot detection</span>
                  </div>
                  <div style="display: flex; align-items: center; margin-bottom: 12px; color: #1a1a2e;">
                    <span style="font-size: 1.5rem; margin-right: 12px; color: #667eea;">✓</span>
                    <span>Supports video and image files</span>
                  </div>
                  <div style="display: flex; align-items: center; color: #1a1a2e;">
                    <span style="font-size: 1.5rem; margin-right: 12px; color: #667eea;">✓</span>
                    <span>Instant results and analysis</span>
                  </div>
                </div>
                  
                  <form action="{% url 'smart_car_parking' %}" class="appointment" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    
                    <!-- Detection Type Selection -->
                    <div style="margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg, #f0f5ff 0%, #e8f1ff 100%); border-radius: 12px; border-left: 4px solid #667eea;">
                      <label style="display: block; margin-bottom: 15px; font-weight: 700; color: #1a1a2e; font-size: 1.1rem;">
                        <i class="fa fa-cogs" style="margin-right: 8px; color: #667eea;"></i>Select Detection Type
                      </label>
                      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                        <label style="display: flex; align-items: center; padding: 12px 15px; background: white; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#667eea'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='transparent'; this.style.boxShadow='none'">
                          <input type="radio" name="detection_type" value="multi_lane" checked style="margin-right: 10px; cursor: pointer; width: 18px; height: 18px;">
                          <span style="color: #333; font-weight: 500;">
                            <i class="fa fa-arrows-h" style="margin-right: 6px; color: #667eea;"></i>Multi-Lane Detection
                          </span>
                        </label>
                        
                        <label style="display: flex; align-items: center; padding: 12px 15px; background: white; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#667eea'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='transparent'; this.style.boxShadow='none'">
                          <input type="radio" name="detection_type" value="reserved_spot" style="margin-right: 10px; cursor: pointer; width: 18px; height: 18px;">
                          <span style="color: #333; font-weight: 500;">
                            <i class="fa fa-star" style="margin-right: 6px; color: #ffa502;"></i>Reserved Spot
                          </span>
                        </label>
                        
                        <label style="display: flex; align-items: center; padding: 12px 15px; background: white; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#667eea'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='transparent'; this.style.boxShadow='none'">
                          <input type="radio" name="detection_type" value="night_vision" style="margin-right: 10px; cursor: pointer; width: 18px; height: 18px;">
                          <span style="color: #333; font-weight: 500;">
                            <i class="fa fa-moon-o" style="margin-right: 6px; color: #764ba2;"></i>Night Vision
                          </span>
                        </label>
                        
                        <label style="display: flex; align-items: center; padding: 12px 15px; background: white; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#667eea'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='transparent'; this.style.boxShadow='none'">
                          <input type="radio" name="detection_type" value="angled_spot" style="margin-right: 10px; cursor: pointer; width: 18px; height: 18px;">
                          <span style="color: #333; font-weight: 500;">
                            <i class="fa fa-sliders" style="margin-right: 6px; color: #00d084;"></i>Angled Spot Tracking
                          </span>
                        </label>
                      </div>
                    </div>
                    
                    <!-- Progress Indicator -->
                    <div style="margin-bottom: 30px; padding: 20px; background: rgba(102, 126, 234, 0.08); border-radius: 10px; display: none;" id="progressSection">
                      <div style="display: flex; justify-content: space-between; margin-bottom: 15px; color: #667eea; font-weight: 600;">
                        <span>Processing Status</span>
                        <span id="progressPercent">0%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #ddd; border-radius: 10px; overflow: hidden;">
                        <div id="progressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.3s ease; border-radius: 10px;"></div>
                      </div>
                      <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px;">
                        <div style="display: flex; align-items: center; color: #333; font-size: 0.95rem;">
                          <i class="fa fa-spinner fa-spin" style="margin-right: 10px; color: #667eea;"></i>
                          <span id="statusText">Uploading file...</span>
                        </div>
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <div class="form-field">
                            <div class="select-wrap">
                              <div class="col-md-12">
                                <div class="col-md-12">
                                  <div class="form-group">
                                    <div class="custom-file-upload">
                                      <div class='file file--upload'>
                                        {% comment %} <label for='input-file'>
                                          <i class="material-icons">cloud_upload</i>Upload
                                        </label> {% endcomment %}
                                        {% comment %} <input name="upload_file"  type='file'/>  {% endcomment %}
                                      </div><br>
                                      <div style="box-shadow: 20px 20px 50px 0px rgba(0, 0, 0, 0.15); border-radius: 10px;" class="custom-file pmd-custom-file-outline mb-5">
                                        <input type="file" name="upload_file" class="custom-file-input" id="videoFileInput">
                                        <label class="custom-file-label is-valid" for="videoFileInput" id="videoFileLabel"><i class="fa fa-cloud-upload" style="margin-right: 8px;"></i>Choose file</label>
                                       
                                    </div> <br>
                                      <input type="submit" class="btn btn-info" style="font-size: large; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; padding: 15px 40px; border-radius: 10px; font-weight: 600; letter-spacing: 1px; box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); transition: all 0.3s ease;" value="ANALYZE PARKING"> 
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
</section> 
<style>
    .file {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}

.file > input[type='file'] {
  display: none
}

.file > label {
  font-size: 1rem;
  font-weight: 300;
  cursor: pointer;
  outline: 0;
  user-select: none;
  border-color: rgb(216, 216, 216) rgb(209, 209, 209) rgb(186, 186, 186);
  border-style: solid;
  border-radius: 4px;
  border-width: 1px;
  background-color: hsl(0, 0%, 100%);
  color: hsl(0, 0%, 29%);
  padding-left: 16px;
  padding-right: 16px;
  padding-top: 16px;
  padding-bottom: 16px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.file > label:hover {
  border-color: hsl(0, 0%, 21%);
}

.file > label:active {
  background-color: hsl(0, 0%, 96%);
}

.file > label > i {
  padding-right: 5px;
}

.file--upload > label {
  color: hsl(204, 86%, 53%);
  border-color: hsl(204, 86%, 53%);
}

.file--upload > label:hover {
  border-color: hsl(204, 86%, 53%);
  background-color: hsl(204, 86%, 96%);
}

.file--upload > label:active {
  background-color: hsl(204, 86%, 91%);
}


@keyframes pulse {
  0% {
    color: hsl(48, 100%, 67%);
  }
  50% {
    color: hsl(48, 100%, 38%);
  }
  100% {
    color: hsl(48, 100%, 67%);
  }
}
  </style>
<!--footer starts here-->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/jquery-migrate-3.0.1.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'js/jquery.stellar.min.js' %}"></script>
<script src="{% static 'js/jquery.animateNumber.min.js' %}"></script>
<script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
<script src="{% static 'js/jquery.timepicker.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'js/scrollax.min.js' %}"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="{% static 'js/google-map.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
{% if messages %}
{% for message in messages %}
    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        <script>swal({
                title: "Success!",
                text: "{{message}}",
                icon: "success",
                button: "OK",
            });
        </script>
    
    {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
        <script>swal({
                title: "Warning :)",
                text: "{{message}}",
                icon: "warning",
                button: "OK",
            
            });
        </script>
    {% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
        <script>swal({
                title: "info :)",
                text: "{{message}}",
                icon: "info",
                button: "OK",
            });
        </script>
    {% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        <script>swal({
                title: "error :)",
                text: "{{message}}",
                icon: "error",
                button: "OK",
            });
        </script>
    {% endif %}
{% endfor %}
{% endif %}
<script>
  // Display file name when file is selected
  const videoFileInput = document.getElementById('videoFileInput');
  const videoFileLabel = document.getElementById('videoFileLabel');
  
  if (videoFileInput) {
    videoFileInput.addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        videoFileLabel.textContent = this.files[0].name;
      }
    });
  }

  // Progress bar on form submission
  const form = document.querySelector('.appointment').closest('form');
  if (form) {
    form.addEventListener('submit', function() {
      const progressSection = document.getElementById('progressSection');
      const progressBar = document.getElementById('progressBar');
      const progressPercent = document.getElementById('progressPercent');
      const statusText = document.getElementById('statusText');
      
      progressSection.style.display = 'block';
      
      const statuses = [
        { percent: 10, text: 'Uploading file...' },
        { percent: 30, text: 'Validating video...' },
        { percent: 50, text: 'Processing parking data...' },
        { percent: 70, text: 'Analyzing parking spaces...' },
        { percent: 90, text: 'Generating results...' }
      ];
      
      let currentStatus = 0;
      const progressInterval = setInterval(() => {
        if (currentStatus < statuses.length) {
          const status = statuses[currentStatus];
          progressBar.style.width = status.percent + '%';
          progressPercent.textContent = status.percent + '%';
          statusText.textContent = status.text;
          currentStatus++;
        } else {
          clearInterval(progressInterval);
          progressBar.style.width = '100%';
          progressPercent.textContent = '100%';
          statusText.textContent = 'Complete! Redirecting...';
        }
      }, 800);
    });
  }
</script>
  </body>
  </html>      